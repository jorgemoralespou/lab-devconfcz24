<!DOCTYPE html>
<html>

<head><script src="/workshop/content/livereload.js?mindelay=10&amp;v=2&amp;port=443&amp;path=workshop/content/livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="generator" content="Educates (hugo)">

<title>
  
  </title>

<link rel="stylesheet" href='/workshop/static/bootstrap/css/bootstrap.css'>
<link rel="stylesheet" href='/workshop/static/fontawesome/css/all.min.css'>

<link rel="stylesheet" href='/workshop/static/styles/educates.css'>
<link rel="stylesheet" href='/workshop/static/styles/educates-markdown.css'>
<link rel="stylesheet" href='/workshop/static/theme/workshop-instructions.css'>

<link rel="shortcut icon" href='/workshop/static/images/favicon.ico'>





</head>


























































































































































































































































































































































































































<body data-google-tracking-id=''
  data-clarity-tracking-id=''
  data-amplitude-tracking-id='' data-workshop-name='educates-cli--lab-devconfcz24-68963d9'
  data-session-namespace='educates-cli-w13-s002' data-workshop-namespace='educates-cli-w13'
  data-training-portal='educates-cli' data-ingress-domain='kind.mac16.tanzu-devs.com'
  data-ingress-protocol='https' data-ingress-port-suffix=''
  data-prev-page='03-clickable-actions' data-current-page='10-cluster-create'
  data-next-page='11-educates-install' data-page-format='markdown' data-code-fences='chroma'
  data-page-step='5' data-pages-total='20'>

  




<div class="modal fade" id="table-of-contents" tabindex="-1" role="dialog" aria-labelledby="table-of-contents-title"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 id="table-of-contents-title">Show and wow</h5>
                <button class="btn btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <ul class="menu">
                    <li class="category">
                        <ul class="modules">
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/00-workshop-overview">1: Workshop Overview</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/01-kubernetes-cluster">2: Kubernetes Cluster</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/02-packaging-mechanism">3: Packaging Mechanism</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/03-clickable-actions">4: Clickable Actions</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page active">
                                <a href="/workshop/content/10-cluster-create">5: Cluster Installation</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/11-educates-install">6: Cluster Installation</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/12-testing-the-installation">7: Testing the Installation</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/13-accesing-a-workshop">8: Accessing Workshops</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/14-the-training-portal">9: The training portal</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/15-definition-of-a-workshop">10: Definition of a workshop</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/16-test-cleanup">11: Cleaning up the environment</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/20-authoring-workshops">12: Authoring Workshops</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/21-structure-of-a-workshop">13: Structure of a Workshop</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/22-publishing-workshops">14: Publishing Workshops</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/23-deploy-the-workshop">15: Deploy the Workshop</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/24-updating-instructions">16: Updating Instructions</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/25-manually-updating">17: Manually Updating</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/26-realtime-updates">18: Realtime Updates</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/30-workshop-definition">19: Workshop Definition</a>
                            </li>
                            
                            
                            
                            
                            
                            
                            <li class="page">
                                <a href="/workshop/content/99-workshop-summary">20: Workshop Summary</a>
                            </li>
                            
                            
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" type="button" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="header page-navbar sticky-top bg-primary">
    <div class="row row-no-gutters">
        <div class="col-sm-12">
            <div class="btn-group btn-group-sm" role="group">
                <form action='/workshop/content/'>
                    <button class="btn btn-transparent" id="header-goto-home" type="submit" aria-label="home"><span
                            class="fas fa-home fa-inverse" aria-hidden="true"></span></button>
                </form>
            </div>
            <div class="btn-toolbar float-end" role="toolbar">
                <div class="btn-group btn-group-sm" role="group">
                    <form action="/workshop/content/03-clickable-actions">
                        <button class="btn btn-transparent" id="header-prev-page" type="submit"  aria-label="Prev"><span
                                class="fas fa-arrow-left fa-inverse" aria-hidden="true"></span></button>
                    </form>
                    <form>
                        <button class="btn btn-transparent" id="header-goto-toc" type="button" aria-label="TOC"
                            data-bs-toggle="modal" data-bs-target="#table-of-contents"><span class="fas fa-list fa-inverse"
                                aria-hidden="true"></span></button>
                    </form>
                    <form action="/workshop/content/11-educates-install">
                        <button class="btn btn-transparent" id="header-next-page" type="submit"  aria-label="Next"><span
                                class="fas fa-arrow-right fa-inverse" aria-hidden="true"></span></button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>


  




<div class="container-fluid main-content">
  <div class="row">
    <div class="col-sm-12">
      <section class="page-content" id="main">
        
        
        
        <h1 class="title" id="title">5: Cluster Installation</h1>
        
        <div class="rendered-content">
          <p>The name of the Educates CLI is <code>educates</code>, and there&rsquo;s flavors of the CLI for
MacOS and Linux, both AMD64 and ARM64, which can be found in
<a href="https://github.com/vmware-tanzu-labs/educates-training-platform/releases">the project&rsquo;s GitHub repository</a></p>
<p>To install into an existing Kubernetes cluster the CLI command which needs to be
used is:</p>
<pre tabindex="0"><code>educates admin cluster install
</code></pre><p>Before running this command an appropriate configuration file needs to be
created.</p>
<p>For installation of Educates into the virtual cluster created for this workshop
session we will use the following configuration. Click on the action block below
to automatically open the embedded editor and create the file for you.</p>
<pre tabindex="0"><code class="language-editor:append-lines-to-file" data-lang="editor:append-lines-to-file">file: ~/vcluster-config.yaml
cooldown: .INF
text: |
    # Specify the infrastructure provider hosting the Kubernetes cluster.

    clusterInfrastructure:
        provider: vcluster

    # Specify the ingress domain to be used to access the workshops hosted by
    # the Educates installation.

    clusterIngress:
        domain: educates-cli-w13-s002.kind.mac16.tanzu-devs.com

    # Disable the cluster and security policy engines, and skip installing
    # Kyverno, as policies are enforced by the Educates installation running
    # this workshop session.

    clusterPackages:
        kyverno:
            enabled: false

    clusterSecurity:
        policyEngine: none

    workshopSecurity:
        rulesEngine: none        
</code></pre><p>The two key bits of information that we are supplying here are the type of
infrastructure provider and what domain name should be used to access workshops
hosted by the cluster after Educates has been installed.</p>
<p>For this workshop session running in Educates, we set the ingress domain for
our Educates installation to correspond to the ingress domain allocated for
this workshop session.</p>
<p>To make it easier to install Educates into a freshly created Kubernetes cluster
a number of opinionated configurations are provided for different infrastructure
providers, such as EKS (AWS), GKE (GCP) and AKS (Azure). In this case we have
set the provider as <code>vcluster</code> corresponding to what would be expected for a
virtual cluster created using the
<a href="https://github.com/loft-sh/vcluster">vCluster</a> package from <a href="https://loft.sh/">Loft
Labs</a>.</p>
<p>To see what hidden configuration was added in the case of setting the provider
to <code>vcluster</code>, run:</p>
<pre tabindex="0"><code class="language-terminal:execute" data-lang="terminal:execute">command: educates admin cluster install --config vcluster-config.yaml --show-packages-values --skip-image-resolution
</code></pre><p>The aim of the opinionated cluster configurations is thus to take a fresh
Kubernetes cluster and install everything you need to run Educates, as well as
Educates itself.</p>
<p>Other configuration we have included above isn&rsquo;t strictly necessary and
everything will work without supplying it, but since we are using Educates to
demonstrate installation of Educates, we don&rsquo;t need to enable the cluster and
workshop security policy engine, nor install Kyverno which is normally used to
implement such policies, as the underlying Educates installation this workshop
session is running in is already enforcing security policies for everything we
are doing. Disabling this will speed up our installation a bit, but for a real
Educates installation you should keep the security policy engines enabled.</p>
<p>Refer to the documentation if you want to learn more about this topic.</p>

        </div>
        
        <div class="page-meta clearfix">
          <form action="/workshop/content/11-educates-install">
            <button class="btn btn-lg btn-primary float-end" id="next-page" type="submit" aria-label="continue">
              Continue </button>
          </form>
        </div>
        
      </section>
    </div>
  </div>
</div>
</section>


  <script src='/workshop/static/scripts/educates-bundle.js'></script>
<script src='/workshop/static/theme/workshop-instructions.js'></script>


</body>

</html>
